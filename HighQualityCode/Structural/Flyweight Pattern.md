#Flyweight Patern

## Мотивация (Motivation) 
Някои програми изискват голям брой обекти, които имат някакви споделени състояния сред тях. Например игра на война, където има голям брой от войници обекти. Войникът поддържа графично представяне на войник, поведение на войник като движение и стрелящи уръжия, в допълнение живот на войника и местонахождение на бойното поле. Създаване на голям брой войници е необходимо, което ще доведе до голяма загуба на памет. Въпреки че представянето и поведението на войника е едно и също техния живот и местонахождение може да варира значително.

## Намерение (Intent)
Целта на Flyweight модела е да се използва споделяне, за да поддържа голям брой обекти, които имат част от тяхното вътрешно състояние, в общия случай където другата част от състоянието неможе да се променя.

## Приложимост (Applicability)
Flyweight модела се прилага към програма използвайки огромен брой обекти, които имат част от тяхното вътрешно състояние, в общия случай където другата част от състоянието не може да се променя. Модела се използва, когато по-голяма част от състоянието на обекта може да бъде направено външно (външно към обекта).

## Известни употреби (Known Uses)
 * Игри с графика
 * Текстови редактори

## Имплементация(Implementation)
Клиента се нуждае от flyweight обект. Извиква factory за да вземе flyweight обект. Factory проверява съвкупност от flyweights за да определи дали  flyweight обект от заявения тип е в съвкупността. Ако е то връща референцията му към обекта. Ако няма обект в съвкупността от заявения тип, factory създава flyweight обект от заявения тип, добавя го към съвкупността и връща референцията към flyweight. Flyweight поддържа присъщо състояние (състояние, което е споделено сред голям брой обекти, за които сме създали този flyweight) и осигурява методи за да управлява външното състояние.

## Участници (Participants)
 * Flyweight 
 * ConcreteFlyweight 
 * FlyweightFactory 
 * Client
 
## Последствия (Consequences)
Flyweight модела спестява памет като споделя flyweight обекти сред клиентите. Количеството запазена памет, главно зависи от броя на flyweight категориите които са запазени (например категория войник и категория лейтенант).

## Структура (Structure) 
![alt tag](http://www.oodesign.com/images/design_patterns/structural/flyweight-design-pattern-implementation-uml-class-diagram.png)


## Свързани patterns (Related patterns)
 * Factory и Singleton patterns - Flyweights обикновенно са създадени с помощта на factory и singleton се прилага към това factory, така че за всеки тип или категория на flyweights се връща едина негова инстанция.
 * State и Strategy patterns - State и Strategy обектите обикновено са имплементирани като Flyweights.